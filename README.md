# Mini RAG Chat

<div align="center">

**ä¸ºä½é…ç½®æœåŠ¡å™¨ä¼˜åŒ–çš„è½»é‡çº§RAGå¯¹è¯ç³»ç»Ÿ**

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org)
[![LangChain](https://img.shields.io/badge/LangChain-0.1+-green.svg)](https://github.com/langchain-ai/langchain)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ ä½é…ç½®ä¼˜åŒ–
- **2æ ¸4G CPU å³å¯è¿è¡Œ**ï¼Œæ— éœ€GPU
- å†…å­˜å ç”¨ä¼˜åŒ–ï¼ˆ<2GBï¼‰
- CPUæ¨ç†åŠ é€Ÿé…ç½®
- æ™ºèƒ½æ‰¹å¤„ç†å’Œç¼“å­˜
- **å¹¶å‘æ§åˆ¶**ï¼šä¿æŠ¤æœåŠ¡å™¨èµ„æºï¼Œé˜²æ­¢è¿‡è½½
- **é¢‘ç‡é™åˆ¶**ï¼šé˜²æ­¢æ¶æ„æ”»å‡»å’Œè„šæœ¬æ»¥ç”¨

### ğŸ”’ å®‰å…¨é˜²æŠ¤
- **è¾“å…¥é•¿åº¦é™åˆ¶**ï¼šé˜²æ­¢è¿‡é•¿è¾“å…¥å½±å“æ€§èƒ½
- **å†…å®¹å®‰å…¨è¿‡æ»¤**ï¼šé˜²æ­¢æ¶æ„æŸ¥è¯¢å’Œç³»ç»Ÿä¿¡æ¯æ³„éœ²
- **æ•æ„Ÿè¯æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«å¹¶é˜»æ­¢æŠ€æœ¯ç»†èŠ‚æŸ¥è¯¢
- **æ™ºèƒ½æˆªæ–­**ï¼šè¶…é•¿è¾“å…¥è‡ªåŠ¨æˆªæ–­è€Œéæ‹’ç»
- **é¢‘ç‡é™åˆ¶**ï¼šåŸºäºçœŸå®IPçš„å¤šçº§é¢‘ç‡æ§åˆ¶ï¼ˆåˆ†é’Ÿ/å°æ—¶/å¤©ï¼‰
- **è„šæœ¬æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œæ‹¦æˆªcurlã€python-requestsç­‰è„šæœ¬å·¥å…·
- **ä»£ç†æ”¯æŒ**ï¼šæ­£ç¡®è¯†åˆ«Nginx/CDNåçš„çœŸå®IP

### ğŸ¯ æ™ºèƒ½æ„å›¾è¯†åˆ«ï¼ˆå¯é€‰ï¼‰
- **è½»é‡çº§åˆ†ç±»å™¨**ï¼šåŸºäºm3e-smallçš„æ„å›¾è¯†åˆ«æ¨¡å‹
- **ä¼˜åŒ–RAGè°ƒç”¨**ï¼šç®€å•é—®å€™ã€ç¤¼è²Œç”¨è¯­è·³è¿‡RAGï¼ŒèŠ‚çœèµ„æº
- **å¤šæ„å›¾æ”¯æŒ**ï¼šé—®å€™ã€çŸ¥è¯†é—®ç­”ã€ç¤¼è²Œç”¨è¯­ã€ç³»ç»ŸæŸ¥è¯¢ã€æœªçŸ¥
- **æ˜“äºè®­ç»ƒ**ï¼š90æ¡æ ·æœ¬å³å¯è¾¾åˆ°>90%å‡†ç¡®ç‡
- **è¯¦è§**ï¼š[intent_fine_tuning/README.md](intent_fine_tuning/README.md)

### ğŸ‡¨ğŸ‡³ ä¸­æ–‡ä¼˜åŒ–
- **m3e-small åµŒå…¥æ¨¡å‹**ï¼šä¸“ä¸ºä¸­æ–‡RAGä¼˜åŒ–ï¼ˆ200MBï¼‰
- **Qwen2-1.5B LLM**ï¼šå¼ºå¤§çš„ä¸­æ–‡ç†è§£èƒ½åŠ›ï¼ˆ1.5GBï¼‰
- ä¸­æ–‡åˆ†è¯å’Œè¯­ä¹‰ä¼˜åŒ–
- æ”¯æŒä¸­æ–‡æ–‡æ¡£å¤„ç†

### ğŸ“¦ æ¨¡å—åŒ–è®¾è®¡
- `RAGManager`ï¼šæ–‡æ¡£åŠ è½½ã€åˆ‡åˆ†ã€å‘é‡åº“ç®¡ç†
- `QueryExpander`ï¼šæŸ¥è¯¢æ”¹å†™å’Œæ‰©å±•
- `ChatHandler`ï¼šå¯¹è¯å¤„ç†å’Œä¸Šä¸‹æ–‡ç®¡ç†
- `SecurityFilter`ï¼šå®‰å…¨è¿‡æ»¤å’Œè¾“å…¥éªŒè¯
- `DocumentCompressor`ï¼šæ–‡æ¡£å‹ç¼©å’Œæ‘˜è¦æå–
- `IntentClassifier`ï¼šæ„å›¾è¯†åˆ«å’Œè·¯ç”±
- `RateLimiter`ï¼šé¢‘ç‡é™åˆ¶å’Œè„šæœ¬æ£€æµ‹
- æ˜“äºæ‰©å±•å’Œè‡ªå®šä¹‰

### ğŸ”„ å¢é‡åŠ è½½
- **æ— éœ€é‡å»ºæ•´ä¸ªå‘é‡åº“**
- æ”¯æŒ PDF å’Œ TXT æ ¼å¼
- è‡ªåŠ¨æ–‡æ¡£è¿ç§»
- çƒ­æ›´æ–°æ”¯æŒï¼ˆè¿è¡Œæ—¶åŠ è½½æ–°æ–‡æ¡£ï¼‰

### âš¡ æµå¼è¾“å‡º
- **å®æ—¶å“åº”**ï¼šé€å­—æ˜¾ç¤ºAIå›ç­”ï¼Œé¦–å­—å“åº”æ—¶é—´ç¼©çŸ­80%
- **çŠ¶æ€æç¤º**ï¼šå®æ—¶æ˜¾ç¤ºæ£€ç´¢å’Œç”Ÿæˆè¿›åº¦
- **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼šæ— éœ€ç­‰å¾…å®Œæ•´ç”Ÿæˆ
- **æ™ºèƒ½é™çº§**ï¼šè‡ªåŠ¨å…¼å®¹éæµå¼æ¨¡å¼

### ğŸ—œï¸ æ–‡æ¡£å‹ç¼©
- **æ··åˆå‹ç¼©**ï¼šTextRankåˆç­› + m3eè¯­ä¹‰é‡æ’åº
- **æ™ºèƒ½æå–**ï¼šåŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦é€‰æ‹©æœ€ç›¸å…³å¥å­
- **é«˜å‹ç¼©ç‡**ï¼š75%+çš„å‹ç¼©ç‡ï¼Œä¿ç•™æ ¸å¿ƒä¿¡æ¯
- **é›¶é¢å¤–æˆæœ¬**ï¼šå¤ç”¨m3eæ¨¡å‹ï¼Œæ— éœ€æ–°æ¨¡å‹
- **æ˜¾è‘—æé€Ÿ**ï¼šLLMå¤„ç†é€Ÿåº¦æå‡50%+
- **è¯¦è§**ï¼š[WIKI.md - æ–‡æ¡£å‹ç¼©ä¼˜åŒ–](WIKI.md#-æ–‡æ¡£å‹ç¼©ä¼˜åŒ–)

### ğŸ› ï¸ å®Œæ•´å·¥å…·é›†
- **æ•°æ®æ¸…æ´—å·¥å…·**ï¼ˆ`clean_text.py`ï¼‰ï¼šæ–‡æœ¬å»å™ªã€æ ¼å¼åŒ–
- **è´¨é‡è¯„ä¼°å·¥å…·**ï¼ˆ`evaluate_quality.py`ï¼‰ï¼šè¯„ä¼°RAGæ•ˆæœ
- å®Œæ•´çš„æ—¥å¿—å’Œç›‘æ§

---

## ğŸ’» ç³»ç»Ÿè¦æ±‚

### æœ€ä½é…ç½®
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 4GB RAM
- **å­˜å‚¨**: 10GB å¯ç”¨ç©ºé—´
- **æ“ä½œç³»ç»Ÿ**: Windows / Linux / macOS
- **Python**: 3.8+

### æ¨èé…ç½®
- **CPU**: 4æ ¸å¿ƒ
- **å†…å­˜**: 8GB RAM
- **å­˜å‚¨**: 20GB SSD

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/yourusername/mini-rag-chat.git
cd mini-rag-chat
```

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# å®˜æ–¹æºï¼ˆå›½å¤–ï¼‰
pip install -r requirements.txt

# å›½å†…ç”¨æˆ· - ä½¿ç”¨é•œåƒæºåŠ é€Ÿâ­æ¨è
pip install -r requirements.txt -i https://mirrors.aliyun.com/pypi/simple/
```

**æ°¸ä¹…é…ç½®é•œåƒæº**ï¼ˆæ¨èï¼‰ï¼š

```bash
# Linux/macOS
pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/
pip config set install.trusted-host mirrors.aliyun.com

# Windows (PowerShell)
pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/
pip config set install.trusted-host mirrors.aliyun.com
```

### 3ï¸âƒ£ ä¸‹è½½æ¨¡å‹

è¯¦è§ [WIKI.md](WIKI.md#-æ¨¡å‹ä¸‹è½½) ç« èŠ‚

### 4ï¸âƒ£ å‡†å¤‡æ„å›¾åˆ†ç±»å™¨ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€ä½¿ç”¨æ™ºèƒ½æ„å›¾è¯†åˆ«åŠŸèƒ½ä¼˜åŒ–RAGæ€§èƒ½ï¼š

```bash
# è¿›å…¥æ„å›¾åˆ†ç±»å™¨ç›®å½•
cd intent_fine_tuning

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# è®­ç»ƒæ¨¡å‹
python train.py

# æµ‹è¯•æ¨¡å‹
python test.py

# è¿”å›é¡¹ç›®æ ¹ç›®å½•
cd ..
```

**é‡è¦**ï¼šè®­ç»ƒåçš„æ¨¡å‹ä¼šä¿å­˜åœ¨ `intent_fine_tuning/model/intent-classifier/`ï¼Œä½¿ç”¨æ—¶éœ€è¦æ‰‹åŠ¨æ‹·è´åˆ° `model/intent-classifier/`ï¼š

```bash
# Windows (PowerShell)
Copy-Item -Path "intent_fine_tuning\model\intent-classifier\*" -Destination "model\intent-classifier\" -Recurse -Force

# Linux/macOS
cp -r intent_fine_tuning/model/intent-classifier/* model/intent-classifier/
```

è¯¦ç»†è¯´æ˜è§ï¼š[intent_fine_tuning/README.md](intent_fine_tuning/README.md)

### 5ï¸âƒ£ å‡†å¤‡æ•°æ®

å°†ä½ çš„æ–‡æ¡£ï¼ˆPDFæˆ–TXTï¼‰æ”¾å…¥ `data/` ç›®å½•ï¼š

```bash
data/
  â”œâ”€â”€ document1.txt
  â”œâ”€â”€ document2.pdf
  â””â”€â”€ document3.txt
```

### 6ï¸âƒ£ å¯åŠ¨æœåŠ¡

```bash
python app.py
```

æœåŠ¡å°†åœ¨ `http://localhost:5000` å¯åŠ¨

### 7ï¸âƒ£ å¼€å§‹å¯¹è¯

åœ¨æµè§ˆå™¨æ‰“å¼€ `http://localhost:5000`ï¼Œå³å¯å¼€å§‹å¯¹è¯ï¼

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

ğŸ“– **å®Œæ•´ä½¿ç”¨æŒ‡å—**ï¼š[WIKI.md](WIKI.md)

åŒ…å«ä»¥ä¸‹è¯¦ç»†å†…å®¹ï¼š
- ğŸ“¥ æ¨¡å‹ä¸‹è½½æŒ‡å—ï¼ˆå«å›½å†…é•œåƒï¼‰
- âš™ï¸ è¯¦ç»†é…ç½®è¯´æ˜
- ğŸ“š ä½¿ç”¨æŒ‡å—å’Œæœ€ä½³å®è·µ
- ğŸ› ï¸ å·¥å…·é›†ä½¿ç”¨è¯´æ˜
- ğŸŒ APIæ¥å£æ–‡æ¡£
- â“ å¸¸è§é—®é¢˜è§£ç­”
- ğŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•
- ğŸ”§ å¼€å‘æŒ‡å—

ğŸ“– **æ„å›¾åˆ†ç±»å™¨æ–‡æ¡£**ï¼š[intent_fine_tuning/README.md](intent_fine_tuning/README.md)

åŒ…å«ä»¥ä¸‹è¯¦ç»†å†…å®¹ï¼š
- ğŸ¯ æ„å›¾åˆ†ç±»å™¨åŠŸèƒ½ç‰¹æ€§
- ğŸš€ å¿«é€Ÿå¼€å§‹å’Œè®­ç»ƒæŒ‡å—
- ğŸ“Š æ€§èƒ½æŒ‡æ ‡å’Œæ¨¡å‹è¯´æ˜
- ğŸ”§ è‡ªå®šä¹‰è®­ç»ƒæ•°æ®
- ğŸ” æ•…éšœæ’é™¤å’Œå¸¸è§é—®é¢˜


---

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

### ğŸ¯ ä¸“ä¸ºä½é…ä¼˜åŒ–
- 2æ ¸4GæœåŠ¡å™¨å³å¯æµç•…è¿è¡Œ
- å†…å­˜å ç”¨æ§åˆ¶åœ¨2GBä»¥å†…
- CPUæ¨ç†ä¼˜åŒ–ï¼Œæ— éœ€GPU

### ğŸ” ä¼ä¸šçº§å®‰å…¨
- å¤šå±‚å®‰å…¨é˜²æŠ¤æœºåˆ¶
- é˜²æ­¢ç³»ç»Ÿä¿¡æ¯æ³„éœ²
- æ™ºèƒ½è¾“å…¥éªŒè¯å’Œè¿‡æ»¤

### ğŸš€ æè‡´æ€§èƒ½
- æµå¼è¾“å‡ºï¼Œé¦–å­—å“åº”æ—¶é—´<1ç§’
- å¹¶å‘æ§åˆ¶ï¼Œä¿æŠ¤æœåŠ¡å™¨ç¨³å®š
- å¢é‡åŠ è½½ï¼Œæ— éœ€é‡å»ºå‘é‡åº“
- æ–‡æ¡£å‹ç¼©ï¼ŒLLMé€Ÿåº¦æå‡50%+
- æ™ºèƒ½æ„å›¾è¯†åˆ«ï¼Œ83%æŸ¥è¯¢è·³è¿‡RAG

### ğŸ‡¨ğŸ‡³ ä¸­æ–‡å‹å¥½
- ä¸“ä¸ºä¸­æ–‡ä¼˜åŒ–çš„æ¨¡å‹é€‰æ‹©
- å®Œæ•´çš„ä¸­æ–‡æ–‡æ¡£å’Œé”™è¯¯æç¤º
- å›½å†…é•œåƒæºåŠ é€Ÿä¸‹è½½
